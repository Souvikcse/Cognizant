<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer's Menu</title>
    <link rel="stylesheet" href="style/menuCust.css">
</head>
<body>
    <header>
        <div class="logo">
            <span>truYum</span>
            <img src="images/knife-fork.png">
        </div>
        <div class="list">
            <a href="#">Menu</a>
            <a onclick="GotoCart();">Cart</a>
        </div>
    </header>

    <table>
        <caption>Menu Items</caption>
        <tr>
            <th style="width:36%; height: 55px;" class="first">Name</th>
            <th style="width:16%; height: 55px;">Free Delivery</th>
            <th style="width:16%; height: 55px;">Price</th>
            <th style="width:16%; height: 55px;">Category</th>
            <th style="width:16%; height: 55px;">Action</th>
        </tr>

        <!-- <tr>
            <td style="width:36%" class="first">Sandwich</td>
            <td style="width:16%">Rs. 99.00</td>
            <td style="width:16%">Yes</td>
            <td style="width:16%">15/03/2017</td>
            <td style="width:16%"><a href="menu-item-list-customer-notification.html">Add to Cart</a></td>
        </tr> -->
    </table>

    <footer>Copyright <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24" viewBox="0 0 24 24" width="24"><g><rect fill="none" height="19" width="19" x="0"/></g><g><g><g><path d="M11.88,9.14c1.28,0.06,1.61,1.15,1.63,1.66h1.79c-0.08-1.98-1.49-3.19-3.45-3.19C9.64,7.61,8,9,8,12.14 c0,1.94,0.93,4.24,3.84,4.24c2.22,0,3.41-1.65,3.44-2.95h-1.79c-0.03,0.59-0.45,1.38-1.63,1.44C10.55,14.83,10,13.81,10,12.14 C10,9.25,11.28,9.16,11.88,9.14z M12,2C6.48,2,2,6.48,2,12s4.48,10,10,10s10-4.48,10-10S17.52,2,12,2z M12,20c-4.41,0-8-3.59-8-8 s3.59-8,8-8s8,3.59,8,8S16.41,20,12,20z"/></g></g></g></svg> 2019 </footer>

    <script>
        var items = JSON.parse(localStorage.getItem('items'));
        var table = document.getElementsByTagName('table')[0];
        var i = 0;
        while(i<items.length){
            table.innerHTML += `<tr>
                                    <td style="width:36%" class="first">${items[i].name}</td>
                                    <td style="width:16%">${items[i].freedel?"Yes":"No"}</td>
                                    <td style="width:16%">Rs. ${items[i].price}.00</td>
                                    <td style="width:16%">${items[i].type}</td>
                                    <td style="width:16%"><a value="${i}" onclick="addtoCart(this);" style="text-decoration: underline; color: blue; cursor: pointer;">Add to Cart</a></td>
                                </tr>`;

        i++;                        
        }
        
        function addtoCart(e){
            // e.preventDefault();
            
            var index = e.getAttribute('value');
            var items = JSON.parse(localStorage.getItem('items'));
            console.log(e.innerText);
            if ("Cartitems" in localStorage){
                var Cartitems = JSON.parse(localStorage.getItem('Cartitems'));
                var flag = false;
                for(var i=0;i<Cartitems.length;i++){
                    if (Cartitems[i].name == items[index].name)     flag = true;
                }
                if (!flag){
                    Cartitems.push(items[index]);
                    localStorage.setItem('Cartitems', JSON.stringify(Cartitems));
                }
            }
            else{
                var arr = [items[index]];
                localStorage.setItem('Cartitems', JSON.stringify(arr));
            }
            location.href = "menu-item-list-customer-notification.html";
        };

        function GotoCart(){
            if ( "Cartitems" in localStorage ){
                location.href = "cart.html";
            }
            else{
                location.href = "cart-empty.html";
            }
        }
    </script>
</body>
</html>